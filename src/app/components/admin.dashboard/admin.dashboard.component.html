<div class="dashboard-container">
  <div class="dashboard-header">
    <h1>Yönetim Paneli</h1>
    <p class="dashboard-subtitle">Sistem Genel Durum</p>
  </div>

  <div class="dashboard-grid">
    <!-- İstatistikler Bölümü -->
    <div class="stats-grid">
      <!-- Users Section -->
      <div class="stats-card">
        <div class="stats-card-header">
          <div class="stats-card-title">
            <i class="fas fa-users"></i>
            <h2>Kullanıcılar</h2>
          </div>
          <span class="badge">Kullanıcı Yönetimi</span>
        </div>
        <div class="stats-card-body">
          <div class="stat-item">
            <span class="stat-label">Toplam Kullanıcı</span>
            <span class="stat-value">{{dashboardData.totalUsers}}</span>
          </div>
          <div class="stat-item">
            <span class="stat-label">Aktif Kullanıcılar</span>
            <span class="stat-value">{{dashboardData.activeUsers}}</span>
          </div>
          <div class="stat-item">
            <span class="stat-label">Pasif Kullanıcılar</span>
            <span class="stat-value">{{dashboardData.passiveUsers}}</span>
          </div>
        </div>
        <div class="stats-card-footer">
          <div class="progress-bar">
            <div class="progress" [style.width.%]="(dashboardData.activeUsers / dashboardData.totalUsers) * 100"></div>
          </div>
          <span class="progress-text">{{((dashboardData.activeUsers / dashboardData.totalUsers) * 100).toFixed(1)}}%
            Aktif</span>
        </div>
        <div class="stats-card-footer" *ngIf="!isDashboardPage">
          <a [routerLink]="['/admin/users']" class="btn-details">Detay Görüntüle</a>
        </div>
      </div>

      <div id="active-user-stats-card" class="stats-card">
        <div class="stats-card-header">
          <div class="stats-card-title">
            <i class="fas fa-users"></i>
            <h2>Aktif Kullanıcılar</h2>
          </div>
          <span class="badge">Aktif Kullanıcılar</span>
        </div>
        <div class="stats-card-body">
          <div class="stat-item">
            <span class="stat-label">Toplam Aktif Kullanıcı</span>
            <span class="stat-value">{{dashboardData.onlineUser + dashboardData.visitorCount}}</span>
          </div>
          <div class="stat-item">
            <span class="stat-label">Giriş Yapmış Kullanıcı</span>
            <span class="stat-value">{{dashboardData.onlineUser}}</span>
          </div>
          <div class="stat-item">
            <span class="stat-label">Giriş Yapmamış Kullanıcı</span>
            <span class="stat-value">{{dashboardData.visitorCount}}</span>
          </div>
        </div>
        <div class="stats-card-footer">
          <div class="progress-bar">
            <div class="progress-online" [style.width.%]="calculateOnlineUserPercentage()"></div>
            <div class="progress-visitor" [style.width.%]="calculateVisitorCountPercentage()"></div>
          </div>
          <span class="progress-text">Giriş Yapmış: %{{calculateOnlineUserPercentage().toFixed(1)}} - Ziyaretçi:
            %{{calculateVisitorCountPercentage().toFixed(1)}}</span>
        </div>
        <div class="stats-card-footer" *ngIf="!isDashboardPage">
          <a [routerLink]="['/admin/users']" class="btn-details">Detay Görüntüle</a>
        </div>
      </div>

      <!-- İlan Section -->
      <div class="stats-card">
        <div class="stats-card-header">
          <div class="stats-card-title">
            <i class="fas fa-bullhorn"></i>
            <h2>İlanlar</h2>
          </div>
          <span class="badge">İlan Yönetimi</span>
        </div>
        <div class="stats-card-body">
          <div class="stat-item">
            <span class="stat-label">Toplam İlan</span>
            <span class="stat-value">{{dashboardData.totalIlan}}</span>
          </div>
          <div class="stat-item">
            <span class="stat-label">Aktif İlanlar</span>
            <span class="stat-value">{{dashboardData.activeIlan}}</span>
          </div>
          <div class="stat-item">
            <span class="stat-label">Pasif İlanlar</span>
            <span class="stat-value">{{dashboardData.passiveIlan}}</span>
          </div>
        </div>
        <div class="stats-card-footer">
          <div class="progress-bar">
            <div class="progress" [style.width.%]="(dashboardData.activeIlan / dashboardData.totalIlan) * 100"></div>
          </div>
          <span class="progress-text">{{((dashboardData.activeIlan / dashboardData.totalIlan) * 100).toFixed(1)}}%
            Aktif</span>
        </div>
        <div class="stats-card-footer" *ngIf="!isDashboardPage">
          <a [routerLink]="['/admin/ilan/yonetimi']" class="btn-details">Detay Görüntüle</a>
        </div>
      </div>

      <!-- Kriter Section -->
      <div class="stats-card">
        <div class="stats-card-header">
          <div class="stats-card-title">
            <i class="fas fa-list-check"></i>
            <h2>Kriter</h2>
          </div>
          <span class="badge">Kriter Yönetimi</span>
        </div>
        <div class="stats-card-body">
          <div class="stat-item">
            <span class="stat-label">Toplam Kriter Katogorisi</span>
            <span class="stat-value">{{dashboardData.totalKriter}}</span>
          </div>
          <div class="stat-item">
            <span class="stat-label">Alan Kriteri</span>
            <span class="stat-value">{{dashboardData.totalAlanKriteri}}</span>
          </div>
          <div class="stat-item">
            <span class="stat-label">Puan Kriteri</span>
            <span class="stat-value">{{dashboardData.totalPuanKriteri}}</span>
          </div>
        </div>
        <div class="stats-card-footer">
          <div class="progress-bar">
            <div class="progress" [style.width.%]="(dashboardData.totalAlanKriteri / dashboardData.totalKriter) * 100"></div>
          </div>
          <span class="progress-text">{{((dashboardData.totalAlanKriteri / dashboardData.totalKriter) * 100).toFixed(1)}}% Alan
            Kriteri</span>
        </div>
        <div class="stats-card-footer" *ngIf="!isDashboardPage">
          <a [routerLink]="['/admin/kriter']" class="btn-details">Detay Görüntüle</a>
        </div>
      </div>
      
      <!-- Bildirim Section - With new side-by-side progress bar -->
      <div id="bildirim-stats-card" class="stats-card">
        <div class="stats-card-header">
          <div class="stats-card-title">
            <i class="fas fa-bell"></i>
            <h2>Bildirim</h2>
          </div>
          <span class="badge">Bildirim Yönetimi</span>
        </div>
        <div class="stats-card-body">
          <div class="stat-item">
            <span class="stat-label">Toplam Bildirim</span>
            <span class="stat-value">{{dashboardData.totalBildirim}}</span>
          </div>
          <div class="stat-item">
            <span class="stat-label">Okunmuş Bildirim</span>
            <span class="stat-value">{{dashboardData.totalReadBildirim}}</span>
          </div>
          <div class="stat-item">
            <span class="stat-label">Okunmamış Bildirim</span>
            <span class="stat-value">{{dashboardData.totalUnreadBildirim}}</span>
          </div>
        </div>
        <div class="stats-card-footer">
          <div class="progress-bar">
            <div class="progress-read" [style.width.%]="calculateReadPercentage()"></div>
            <div class="progress-unread" [style.width.%]="calculateUnreadPercentage()"></div>
          </div>
          <span class="progress-text">Okunmuş: %{{calculateReadPercentage().toFixed(1)}} - Okunmamış:
            %{{calculateUnreadPercentage().toFixed(1)}}</span>
        </div>
        <div class="stats-card-footer" *ngIf="!isDashboardPage">
          <a [routerLink]="['/admin/bildirim']" class="btn-details">Detay Görüntüle</a>
        </div>
      </div>

      <!-- Alan ve Bölüm Section -->
      <div id="alan-bolum-stats-card" class="stats-card">
        <div class="stats-card-header">
          <div class="stats-card-title">
            <i class="fas fa-th-large"></i>
            <h2>Alan ve Bölüm</h2>
          </div>
          <span class="badge">Sistem Verileri</span>
        </div>
        <div class="stats-card-body">
          <div class="stat-item">
            <span class="stat-label">Toplam Alan</span>
            <span class="stat-value">{{dashboardData.totalAlan}}</span>
          </div>
          <div class="stat-item">
            <span class="stat-label">Toplam Bölüm</span>
            <span class="stat-value">{{dashboardData.totalBolum}}</span>
          </div>
          <div class="stat-item">
            <span class="stat-label">Toplam</span>
            <span class="stat-value">{{dashboardData.totalAlan + dashboardData.totalBolum}}</span>
          </div>
        </div>
        <div class="stats-card-footer">
          <div class="progress-bar">
            <div class="progress-alan" [style.width.%]="calculateAlanPercentage()"></div>
            <div class="progress-bolum" [style.width.%]="calculateBolumPercentage()"></div>
          </div>
          <span class="progress-text">Alan: %{{calculateAlanPercentage().toFixed(1)}} - Bölüm:
            %{{calculateBolumPercentage().toFixed(1)}}</span>
        </div>
        <div class="stats-card-footer" *ngIf="!isDashboardPage">
          <a [routerLink]="['/admin/alan']" class="btn-details">Detay Görüntüle</a>
        </div>
      </div>

      <!-- Total Summary Card - Full width -->
      <div class="stats-card summary-card full-width">
        <div class="stats-card-header">
          <div class="stats-card-title">
            <i class="fas fa-chart-pie"></i>
            <h2>Genel Özet</h2>
          </div>
        </div>
        <div class="stats-card-body">
          <div class="summary-stats">
            <div class="summary-stat-item">
              <div class="summary-icon users-icon">
                <i class="fas fa-users"></i>
              </div>
              <div class="summary-details">
                <span class="summary-value">{{dashboardData.totalUsers}}</span>
                <span class="summary-label">Kullanıcı</span>
              </div>
            </div>
            <div class="summary-stat-item">
              <div class="summary-icon ads-icon">
                <i class="fas fa-bullhorn"></i>
              </div>
              <div class="summary-details">
                <span class="summary-value">{{dashboardData.totalIlan}}</span>
                <span class="summary-label">İlan</span>
              </div>
            </div>
            <div class="summary-stat-item">
              <div class="summary-icon area-icon">
                <i class="fas fa-map-marker-alt"></i>
              </div>
              <div class="summary-details">
                <span class="summary-value">{{dashboardData.totalAlan}}</span>
                <span class="summary-label">Alan</span>
              </div>
            </div>
            <div class="summary-stat-item">
              <div class="summary-icon department-icon">
                <i class="fas fa-building"></i>
              </div>
              <div class="summary-details">
                <span class="summary-value">{{dashboardData.totalBolum}}</span>
                <span class="summary-label">Bölüm</span>
              </div>
            </div>
            <div class="summary-stat-item">
              <div class="summary-icon criteria-icon">
                <i class="fas fa-list-check"></i>
              </div>
              <div class="summary-details">
                <span class="summary-value">{{dashboardData.totalKriter}}</span>
                <span class="summary-label">Kriter</span>
              </div>
            </div>
            <div class="summary-stat-item">
              <div class="summary-icon notification-icon">
                <i class="fas fa-bell"></i>
              </div>
              <div class="summary-details">
                <span class="summary-value">{{dashboardData.totalBildirim}}</span>
                <span class="summary-label">Bildirim</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Son İlanlar Bölümü -->
    <div class="recent-items-section">
      <div class="section-header">
        <h2><i class="fas fa-clock"></i> En Son Eklenen 2 İlan</h2>
        <a *ngIf="!isDashboardPage" [routerLink]="['/admin/ilan/yonetim']" class="view-all">Tüm İlanları Görüntüle <i
            class="fas fa-arrow-right"></i></a>
      </div>

      <div class="recent-items-container">
        <ng-container *ngIf="ilansModelObj && ilansModelObj.length > 0; else noItems">
          <div class="recent-item" *ngFor="let ilan of ilansModelObj">
            <div class="recent-item-header">
              <div class="recent-item-title">
                <h3>{{ilan.baslik}}</h3>
                <span class="item-id">#{{ilan.id}}</span>
              </div>
              <div class="recent-item-status"
                [ngClass]="{'status-active': ilan.status, 'status-passive': !ilan.status}">
                {{ilan.status ? 'Aktif' : 'Pasif'}}
              </div>
            </div>
            <div class="recent-item-details">
              <div class="detail-item">
                <span class="detail-label"><i class="fas fa-tag"></i> İlan Açıklaması:</span>
                <span class="detail-value" [innerHTML]="ilan.aciklama | newline"></span>
              </div>
              <div class="detail-item">
                <span class="detail-label"><i class="fas fa-briefcase"></i> Pozisyon:</span>
                <span class="detail-value">{{ilan.pozisyon.ad}}</span>
              </div>
              <div class="detail-item">
                <span class="detail-label"><i class="fas fa-building"></i> Bölüm:</span>
                <span class="detail-value">{{ilan.bolum.ad || 'Belirtilmemiş'}}</span>
              </div>
            </div>
            <div class="recent-item-footer" *ngIf="!isDashboardPage">
              <a [routerLink]="['/detail/', ilan.id]" class="btn-details">Detay Görüntüle</a>
            </div>
          </div>
        </ng-container>

        <ng-template #noItems>
          <div class="no-items-message">
            <i class="fas fa-info-circle"></i>
            <p>Henüz ilan bulunmamaktadır.</p>
          </div>
        </ng-template>
      </div>
    </div>
  </div>
</div>